version: 2

models:
  - name: stg_sql_server_dbo__addresses
    description: "Tabla de dirección"
    columns:
      - name: address_id
        tests:
          - unique
          - not_null
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "Identificador de dirección"

      - name: zipcode
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: NUMBER(38,0)
        description: "Código postal"

      - name: country
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "País"

      - name: address
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "Dirección"

      - name: state
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "Estado del país"

      - name: deleted
        tests:
          - dbt_utils.not_empty_string
        data_type: boolean
        description: "Responde a si se ha elimado la fila"

      - name: utc_date_load
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ(9)
        description: "Día y hora en el que se carga la información"

  - name: stg_sql_server_dbo__events
    description: "Tabla de eventos de los usuarios"
    columns:
      - name: event_id
        data_type: VARCHAR(256)
        description: "Identificador único para el evento y usuario"

      - name: page_url
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "Página sobre la que se realiza el evento"

      - name: event_type_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
          - relationships:
              to: source('stg_sql_server_dbo','EVENT_TYPE')
              field: event_type_id
        data_type: VARCHAR(256)
        description: "Tipo de evento que es"

      - name: user_id
        data_type: VARCHAR(256)
        tests:
          - not_null
          - dbt_utils.not_empty_string
          - relationships:
              to: source('stg_sql_server_dbo','USERS')
              field: user_id
        description: "Identificador del usuario que realiza el evento"

      - name: product_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
          - relationships:
              to: source('stg_sql_server_dbo','PRODUCTS')
              field: product_id
        data_type: VARCHAR(256)
        description: "Identificador del producto si se realiza un evento con él"

      - name: session_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "ID de la sesión que esta el usuario"

      - name: created_at
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_NTZ(9)
        description: "Año, mes, dia y hora en la que se crea el evento"

      - name: month
        tests:
          - dbt_utils.not_empty_string
        data_type: DATE
        description: "Año, mes y dia en la que se crea el evento"

      - name: order_id
        tests:
          - dbt_utils.not_empty_string
          - relationships:
              to: source('sql_server_dbo','ORDERS')
              field: order_id
        data_type: VARCHAR(256)
        description: "ID de la orden si se crea una orden"

      - name: deleted
        tests:
          - dbt_utils.not_empty_string
        data_type: boolean
        description: "Responde a si se ha elimado la fila"

      - name: utc_date_load
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ(9)
        description: "Día y hora en el que se carga la información"

  - name: stg_sql_server_dbo__orders
    description: ""
    columns:
      - name: order_id
        tests:
          - unique
          - not_null
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "ID único del pedido del usuario"

      - name: shipping_service_id
        tests:
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "ID de la empresa de reparto"

      - name: shipping_cost
        tests:
          - not_null
          - dbt_utils.not_empty_string
          - possitive_values
        data_type: float
        description: "Precio que vale el reparto del pedido"

      - name: address_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
          - relationships:
              to: source('stg_sql_server_dbo','ADRESSES')
              field: address_id
        data_type: VARCHAR(256)
        description: "ID de la dirección del usuario"

      - name: created_at
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_NTZ(9)
        description: "Dia y hora en la que se crea el evento"

      - name: promo_id
        tests:
              - not_null
              - dbt_utils.not_empty_string
              - relationships:
                  to: source('stg_sql_server_dbo','PROMOS')
                  field: promo_id
        data_type: VARCHAR(256)
        description: "ID de la promoción que se ha utilizado"

      - name: estimated_delivery_at
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ(9)
        description: "El tiempo estimado de reparto"

      - name: order_cost
        tests:
          - not_null
          - dbt_utils.not_empty_string
          - possitive_values
        data_type: float
        description: "Coste de la orden"

      - name: user_id
        tests:
              - not_null
              - dbt_utils.not_empty_string
              - relationships:
                  to: source('stg_sql_server_dbo','USERS')
                  field: user_id
        data_type: VARCHAR(256)
        description: "ID del usuario"

      - name: order_total
        tests:
          - not_null
          - dbt_utils.not_empty_string
          - possitive_values
        data_type: float
        description: "Precio total de la orden + envio"

      - name: delivered_at
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ(9)
        description: "Fecha de entrega de la orden"

      - name: tracking_id
        tests:
              - dbt_utils.not_empty_string
              - not_null
        data_type: VARCHAR(256)
        description: "ID para trackear el pedido enviado"

      - name: status_order_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: VARCHAR(256)
        description: "Estado de la orden"

      - name: deleted
        tests:
          - dbt_utils.not_empty_string
        data_type: boolean
        description: "Responde a si se ha elimado la fila"
        
      - name: utc_date_load
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ(9)
        description: "Fecha en la que se ha cargado los datos"
    
  - name: stg_sql_server_dbo__order_items
    description: "Tabla de los artículos que tengan la orden"
    columns:
      - name: order_id
        data_type: VARCHAR(256)
        description: "ID de la orden de los artículos"

      - name: product_id
        data_type: VARCHAR(256)
        description: "ID de los artículos de la orden"

      - name: quantity
        data_type: NUMBER(38,0)
        description: "Cantidad de los productos"

      - name: deleted
        tests:
          - dbt_utils.not_empty_string
        data_type: boolean
        description: "Responde a si se ha elimado la fila"

      - name: utc_date_load
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ(9)
        description: "Fecha en la que se ha cargado los datos"

  - name: stg_sql_server_dbo__products
    description: "Tabla con la lista de los productos"
    columns:
      - name: product_id
        data_type: VARCHAR(256)
        description: ""

      - name: price
        data_type: float
        description: ""

      - name: name
        data_type: VARCHAR(256)
        description: ""

      - name: inventory
        data_type: NUMBER(38,0)
        description: ""

      - name: deleted
        tests:
          - dbt_utils.not_empty_string
        data_type: boolean
        description: "Responde a si se ha elimado la fila"

      - name: utc_date_load
        data_type: TIMESTAMP_TZ(9)
        description: ""

  - name: stg_sql_server_dbo__promos
    description: "Tabla de las promociones"
    columns:
      - name: promo_id
        data_type: VARCHAR(256)
        description: ""

      - name: promo_name
        data_type: VARCHAR(256)
        description: ""

      - name: discount_dolares
        data_type: NUMBER(38,0)
        description: ""

      - name: status_promo_id
        data_type: NUMBER(38,0)
        description: ""

      - name: _fivetran_deleted
        data_type: boolean
        description: ""

      - name: utc_date_load
        data_type: TIMESTAMP_TZ(9)
        description: ""

  - name: stg_sql_server_dbo__shipping_service
    description: "Tabala con los servicios de envio"
    columns:
      - name: shipping_service_id
        data_type: VARCHAR(256)
        description: ""

      - name: shipping_service_name
        data_type: VARCHAR(256)
        description: ""

  - name: stg_sql_server_dbo__status_orders
    description: ""
    columns:
      - name: status_order_id
        data_type: VARCHAR(256)
        description: ""

      - name: status_order_name
        data_type: VARCHAR(256)
        description: ""

  - name: stg_sql_server_dbo__status_promos
    description: ""
    columns:
      - name: status_promo_name
        data_type: VARCHAR(256)
        description: ""

      - name: status_promo_id
        data_type: VARCHAR(256)
        description: ""

  - name: stg_sql_server_dbo__users
    description: ""
    columns:
      - name: user_id
        data_type: VARCHAR(256)
        description: ""

      - name: updated_at
        data_type: TIMESTAMP_TZ(9)
        description: ""

      - name: address_id
        data_type: VARCHAR(256)
        description: ""

      - name: last_name
        data_type: VARCHAR(256)
        description: ""

      - name: created_at
        data_type: TIMESTAMP_TZ(9)
        description: ""

      - name: phone_number
        data_type: VARCHAR(256)
        description: ""

      - name: total_orders
        data_type: NUMBER(38,0)
        description: ""

      - name: first_name
        data_type: VARCHAR(256)
        description: ""

      - name: email
        data_type: VARCHAR(256)
        description: ""

      - name: utc_date_load
        data_type: TIMESTAMP_TZ(9)
        description: ""


  - name: stg_sql_server_dbo__event_type
    description: "Tabla con los tipos de eventos"
    columns:
      - name: event_type_id
        data_type: VARCHAR(256)
        description: ""

      - name: event_type_name
        data_type: VARCHAR(256)
        description: ""

