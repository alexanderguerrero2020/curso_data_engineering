version: 2

models:
  - name: base_sql_dbo_server__EVENTS
    description: "Tabla de los eventos que realiza un usuario"
    config:
      contract:
        enforced: true
    columns:
      - name: event_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          ID del evento.

      - name: page_url
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          URL en la que se realiza el evento.

      - name: event_type
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          Descripción del tipo de evento.

      - name: user_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          Usuario que ha realizado el evento.

      - name: product_id
        data_type: text
        description: >
          Producto con el que se ha interactuado.

      - name: session_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          Sesión del usuario en el evento.

      - name: created_at
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ
        constraints:
          - type: not_null
        description: >
          Fecha que se ha creado el evento.

      - name: order_id
        data_type: text
        description: >
          ID de la ordén.

      - name: date_delete
        data_type: boolean
        description: >
          Fecha en la que se ha eliminado.
        

      - name: date_load
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ
        constraints:
          - type: not_null
        description: >
          Fecha en la que se cargo.


  - name: base_sql_server_dbo__ADDRESSES
    description: "Tabla de dirección de los usuarios"
    config:
      contract:
        enforced: true
    columns:
      - name: address_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          ID de la dirección.

      - name: zipcode
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: number
        constraints:
          - type: not_null
        description: >
          Codigo Postal.

      - name: country
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          País.

      - name: address
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          Dirección.

      - name: state
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          Estado.

      - name: date_delete
        data_type: boolean
        description: >
          Fecha en la que se ha eliminado.
        

      - name: date_load
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ
        constraints:
          - type: not_null
        description: >
          Fecha en la que se cargo.


  - name: base_sql_server_dbo__ORDERS
    description: "Tabla de las ordenes"
    config:
      contract:
        enforced: true
    columns:
      - name: order_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          ID de la orden.

      - name: shipping_service
        data_type: text
        description: >
          Empresa de envios que lo realiza.

      - name: shipping_cost
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: float
        constraints:
          - type: not_null
        description: >
          Precio del envío.

      - name: address_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          ID de la dirección de la compra.

      - name: created_at
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ
        constraints:
          - type: not_null
        description: >
          Fecha en la que se creo la compra.

      - name: promo_id
        data_type: text
        description: "Código de la compra"

      - name: estimated_delivery_at
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ
        description: >
          Fecha estimada del envio.

      - name: order_cost
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: float
        constraints:
          - type: not_null
        description: >
          Precio de la compra.

      - name: user_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          ID del usuario que realiza la compra.

      - name: order_total
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: float
        constraints:
          - type: not_null
        description: >
          Precio total de la compra.

      - name: delivered_at
        tests:
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ
        description: >
          Fecha del envio.

      - name: tracking_id
        data_type: text
        description: >
          ID de seguimiento del envio.

      - name: status
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          Estado de la orden.

      - name: _fivetran_deleted
        data_type: boolean
        description: "Fecha de eliminación"

      - name: _fivetran_synced
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ
        constraints:
          - type: not_null
        description: >
          Fecha en la que se cargo.


  - name: base_sql_server_dbo__ORDER_ITEMS
    description: "Tabla de productos de las ordenes"
    config:
      contract:
        enforced: true
    columns:
      - name: order_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          ID de la orden.

      - name: product_id
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: text
        constraints:
          - type: not_null
        description: >
          ID del producto.

      - name: quantity
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: number
        constraints:
          - type: not_null
        description: >
          Cantidad de productos.

      - name: date_delete
        data_type: boolean
        description: "Fecha en la que se elemino"

      - name: date_load
        tests:
          - not_null
          - dbt_utils.not_empty_string
        data_type: TIMESTAMP_TZ
        constraints:
          - type: not_null
        description: >
          Fecha en la que se cargo.

    
  - name: base_sql_server_dbo__PRODUCTS
    description: ""
    columns:
      - name: product_id
        data_type: varchar
        description: ""

      - name: price
        data_type: float
        description: ""

      - name: name
        data_type: varchar
        description: ""

      - name: inventory
        data_type: number
        description: ""

      - name: date_delete
        data_type: boolean
        description: ""

      - name: date_load
        data_type: timestamp_tz
        description: ""

  - name: stg_sql_server_dbo__promos
    description: ""
    columns:
      - name: promo_id
        data_type: varchar
        description: ""

      - name: discount
        data_type: number
        description: ""

      - name: status
        data_type: varchar
        description: ""

      - name: date_delete
        data_type: boolean
        description: ""

      - name: date_load
        data_type: timestamp_tz
        description: ""

  - name: stg_sql_server_dbo__users
    description: ""
    columns:
      - name: user_id
        data_type: varchar
        description: ""

      - name: updated_at
        data_type: timestamp_tz
        description: ""

      - name: address_id
        data_type: varchar
        description: ""

      - name: last_name
        data_type: varchar
        description: ""

      - name: created_at
        data_type: timestamp_tz
        description: ""

      - name: phone_number
        data_type: varchar
        description: ""

      - name: total_orders
        data_type: number
        description: ""

      - name: first_name
        data_type: varchar
        description: ""

      - name: email
        data_type: varchar
        description: ""

      - name: date_delete
        data_type: boolean
        description: ""

      - name: date_load
        data_type: timestamp_tz
        description: ""